@inherits DotNetNuke.Web.Mvc.Framework.DnnWebViewPage
@using DotNetNuke.Web.Mvc.Helpers

<div id="Items-@Dnn.ModuleContext.ModuleId">
    <h2>Dummy API Values</h2>
    <button id="fetch-btn">Fetch Values</button>
    <ul id="value-list"></ul>
</div>

@section Scripts {
    <script type="text/javascript">
        document.getElementById("fetch-btn").addEventListener("click", function (event) {
            event.preventDefault();  // Prevent page reload

            fetch('/DesktopModules/CustomModul/API/CustomApi/Get')
                .then(response => response.json())
                .then(data => {
                    const list = document.getElementById("value-list");
                    list.innerHTML = "";  // Clear old items

                    if (Array.isArray(data)) {
                        data.forEach(item => {
                            const li = document.createElement("li");
                            li.textContent = item;
                            list.appendChild(li);
                        });
                    } else if (data.error) {
                        const li = document.createElement("li");
                        li.textContent = "Error: " + data.error;
                        list.appendChild(li);
                    }
                })
                .catch(err => {
                    console.error('Error:', err);
                });
        });
    </script>
}

